# =============================================================================
# Knowledge Base Platform - Production Configuration
# =============================================================================
#
# QUICK START (Out-of-Box Installation):
# 1. Copy this file: cp .env.production.example .env
# 2. (Optional) Change PostgreSQL password below
# 3. Start services: docker-compose up -d
# 4. Open browser: http://localhost:8004/setup
# 5. Complete Setup Wizard to configure:
#    - Admin user credentials
#    - API keys (OpenAI, Voyage, Anthropic)
#    - Vector database settings (optional)
#    - System settings (optional)
#
# âœ¨ Most settings are now configured via Setup Wizard!
#    - API keys stored securely in database
#    - Admin password hashed with bcrypt
#    - Settings persist across container restarts
#
# This .env file only handles infrastructure-level configuration.
#
# =============================================================================

# -----------------------------------------------------------------------------
# Infrastructure Configuration (Required)
# -----------------------------------------------------------------------------

# PostgreSQL Database Credentials
# These are used to bootstrap the application database
# IMPORTANT: Change default password in production!
POSTGRES_USER=kb_user
POSTGRES_PASSWORD=kb_pass_change_me
POSTGRES_DB=knowledge_base
POSTGRES_PORT=5434

# -----------------------------------------------------------------------------
# Application Settings (Optional Overrides)
# -----------------------------------------------------------------------------

# Environment
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO

# API Configuration
API_PORT=8004
API_PREFIX=/api/v1

# CORS Origins (adjust for your domain)
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:5174

# -----------------------------------------------------------------------------
# Vector Databases (Optional - Can be configured via Setup Wizard)
# -----------------------------------------------------------------------------

# Qdrant
QDRANT_HTTP_PORT=6334
QDRANT_GRPC_PORT=6335
QDRANT_URL=http://qdrant:6333
QDRANT_GRPC_URL=qdrant:6334
# QDRANT_API_KEY=  # Set via Setup Wizard if needed

# OpenSearch
OPENSEARCH_PORT=9201
OPENSEARCH_URL=http://opensearch:9200
# OPENSEARCH_PASSWORD=  # Set via Setup Wizard if needed

# -----------------------------------------------------------------------------
# API Keys (NOT RECOMMENDED - Use Setup Wizard Instead!)
# -----------------------------------------------------------------------------

# You CAN pre-configure API keys here, but it's strongly recommended to use
# the Setup Wizard for better security. Keys configured in wizard are:
# - Stored encrypted in database
# - Not visible in docker-compose ps
# - Can be rotated without container rebuild

# OPENAI_API_KEY=sk-your-key-here
# VOYAGE_API_KEY=pa-your-key-here
# ANTHROPIC_API_KEY=sk-ant-your-key-here

# -----------------------------------------------------------------------------
# Advanced: External Database Configuration
# -----------------------------------------------------------------------------

# If using external PostgreSQL (not docker-compose managed):
# Uncomment and set your external database URL:
# DATABASE_URL=postgresql+asyncpg://user:pass@external-host:5432/dbname

# If using external Qdrant:
# QDRANT_URL=https://your-qdrant-instance.com
# QDRANT_API_KEY=your-api-key

# If using external OpenSearch:
# OPENSEARCH_URL=https://your-opensearch-instance.com
# OPENSEARCH_USERNAME=admin
# OPENSEARCH_PASSWORD=your-password

# -----------------------------------------------------------------------------
# Security Notes
# -----------------------------------------------------------------------------
#
# IMPORTANT:
# 1. Never commit .env to version control (already in .gitignore)
# 2. Change POSTGRES_PASSWORD from default
# 3. Use Setup Wizard for API keys (not this file)
# 4. Keep encrypted backup of this file
#
# GENERATE SECURE PASSWORDS:
# openssl rand -base64 24
