# Application Configuration
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO
API_HOST=0.0.0.0
API_PORT=8000
API_PREFIX=/api/v1

# Database Configuration
DATABASE_URL=postgresql+asyncpg://kb_user:kb_pass@db:5432/knowledge_base
DB_ECHO=false
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10

# Qdrant Vector Database
QDRANT_URL=http://qdrant:6333
QDRANT_GRPC_URL=qdrant:6334
QDRANT_API_KEY=
QDRANT_COLLECTION_NAME=knowledge_base_vectors
QDRANT_VECTOR_SIZE=3072

# OpenSearch (BM25 lexical search)
OPENSEARCH_URL=http://opensearch:9200
OPENSEARCH_INDEX=kb_chunks
OPENSEARCH_USERNAME=
OPENSEARCH_PASSWORD=
OPENSEARCH_VERIFY_CERTS=false
BM25_MATCH_MODES=strict,balanced,loose
BM25_ANALYZERS=auto,mixed,ru,en
BM25_DEFAULT_MATCH_MODE=balanced
BM25_DEFAULT_MIN_SHOULD_MATCH=50
BM25_DEFAULT_USE_PHRASE=true
BM25_DEFAULT_ANALYZER=mixed

# OpenAI API (REQUIRED - Get your key from https://platform.openai.com/api-keys)
OPENAI_API_KEY=sk-your-api-key-here
OPENAI_EMBEDDING_MODEL=text-embedding-3-large
OPENAI_CHAT_MODEL=gpt-4o
OPENAI_MAX_TOKENS=16000
OPENAI_TEMPERATURE=0.7

# Voyage AI (OPTIONAL - Get your key from https://www.voyageai.com/)
VOYAGE_API_KEY=pa-your-api-key-here
VOYAGE_EMBEDDING_MODEL=voyage-4

# Anthropic (OPTIONAL - Get your key from https://console.anthropic.com/)
ANTHROPIC_API_KEY=sk-ant-your-api-key-here
ANTHROPIC_CHAT_MODEL=claude-3-5-sonnet-20241022
ANTHROPIC_MAX_TOKENS=4000

# Ollama (OPTIONAL - For local models)
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_EMBEDDING_MODEL=nomic-embed-text
OLLAMA_CHAT_MODEL=llama3.1
OLLAMA_TIMEOUT_SECONDS=180

# Document Processing
MAX_CHUNK_SIZE=1000
CHUNK_OVERLAP=200
MAX_FILE_SIZE_MB=50
MAX_CONTEXT_CHARS=0
# MVP: Only TXT and MD files supported initially
ALLOWED_FILE_TYPES=txt,md

# Structure Analysis (LLM-based document TOC generation)
# 0 = unlimited/no truncation, recommended for GPT-4o-mini (128K) or Haiku (200K)
STRUCTURE_ANALYSIS_MAX_CHUNKS=0
STRUCTURE_ANALYSIS_MAX_CHARS_PER_CHUNK=0
STRUCTURE_ANALYSIS_MAX_TOTAL_CHARS=80000
STRUCTURE_ANALYSIS_LLM_MODEL=claude-haiku-4-5-20251001
STRUCTURE_ANALYSIS_LLM_TEMPERATURE=0.3
STRUCTURE_ANALYSIS_QDRANT_PAGE_SIZE=100

# Query Intent Extraction (for structured search)
QUERY_INTENT_LLM_TEMPERATURE=0.1

# Security (for future auth implementation)
# Generate with: openssl rand -hex 32
SECRET_KEY=change-this-in-production-use-openssl-rand-hex-32
ACCESS_TOKEN_EXPIRE_MINUTES=30
ALGORITHM=HS256

# CORS Configuration
CORS_ORIGINS=http://localhost:3000,http://localhost:8004,http://localhost:5173,http://localhost:5174,http://localhost:5175

# Feature Flags
ENABLE_ASYNC_PROCESSING=true
ENABLE_CACHE=false
ENABLE_METRICS=false

# Runtime Defaults
LLM_PROVIDER=openai

# Docker Service Environment (for docker-compose)
POSTGRES_USER=kb_user
POSTGRES_PASSWORD=kb_pass
POSTGRES_DB=knowledge_base
PGADMIN_DEFAULT_EMAIL=admin@example.com
PGADMIN_DEFAULT_PASSWORD=admin
PGADMIN_CONFIG_SERVER_MODE=False
PGADMIN_CONFIG_MASTER_PASSWORD_REQUIRED=False
QDRANT__SERVICE__GRPC_PORT=6334
